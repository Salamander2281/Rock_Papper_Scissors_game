<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, paper, and even scissors</title>
</head>
<body>
    <div id="gameArea">
        <h2 id="roundNum">
            Round 0
        </h2>
        <p id="gameText">
            Greetings silly goose! Today we will play a glorious game 
            of gambling (rock, paper, scissors). Highest score after 5 
            rounds wins!
        </p>
        <div id="buttons">
            <button id="rock">rock</button>
            <button id="paper">paper</button>
            <button id="scissors">scissors</button>
        </div>
    </div>

    <script>
      const gameText = document.querySelector("#gameText");
      const buttons = document.querySelector("#buttons");
      const roundNumDisplay = document.querySelector("#roundNum");

        const rockBtn = document.querySelector("#rock");
            rockBtn.addEventListener("click", () => {
                playGame("rock");
            })
        const paperBtn = document.querySelector("#paper");
            paperBtn.addEventListener("click", () => {
                playGame("paper");
            })
        const scissorsBtn = document.querySelector("#scissors");
            scissorsBtn.addEventListener("click", () => {
                playGame("scissors");
            })

        let humanChoice;
        let computerChoice; 
        let humanScore = 0;
        let computerScore = 0;
        let roundNum = 0;
        let currentScore = computerScore + " for me and " + humanScore + " for you";
        const results = document.createElement("div");

        function getComputerChoice(){
           let computerChoice = Math.floor(Math.random() * 3);
           
            if (computerChoice === 0){
                return "rock";
            }
            else if (computerChoice === 1){
                return "paper";
            }
            else {
                return "scissors";
            }                                                                        
        }  

        function playRound(x,y){
            if (x === "rock" && y === "scissors" || x === "paper" && y === "rock" || x === "scissors" && y === "paper"){
                humanScore++; 
                gameText.textContent = "You played " + humanChoice + " and I played " + computerChoice + ". You Win! Maybe You are good at gambling! " +
                    humanScore + " for you and " + computerScore + " for me";
            }
            else if (x === "rock" && y === "rock" || x === "paper" && y === "paper" || x === "scissors" && y === "scissors"){
                gameText.textContent = "You played " + humanChoice + " and I played " + computerChoice + ". It's a tie! Sucks to suck womp womp. " +
                    humanScore + " for you and " + computerScore + " for me";
            }
            else {
                computerScore++;
                gameText.textContent = "You played " + humanChoice + " and I played " + computerChoice + ". You lose! Maybe I'm getting better. " +
                    humanScore + " for you and " + computerScore + " for me";
            }
        }

        function playGame(button){
            const finalResults = document.createElement("div");
            finalResults.style.paddingTop = "20px";
            humanChoice = button;
            computerChoice = getComputerChoice();
            playRound(humanChoice,computerChoice);
            roundNum++;
            roundNumDisplay.textContent = "Round " + roundNum;
            
            if (roundNum === 5 && humanScore > computerScore){
                gameArea.removeChild(buttons);
                finalResults.textContent = "Victory! You've done it! Against all odds you've beaten the machine! Now go buy a scratch off you've earned it :3";
                gameArea.appendChild(finalResults);
                const playAgain = document.createElement("button")
                playAgain.textContent = "Play Again?";
                gameArea.appendChild(playAgain);
                playAgain.addEventListener("click", () => {
                    location.reload();
                });
            }
            else if (roundNum === 5 && humanScore < computerScore){
                gameArea.removeChild(buttons);
                finalResults.textContent = "You lose, yippee! You can expect your invite to loser town to arrive by mail.";
                gameArea.appendChild(finalResults);
                const playAgain = document.createElement("button")
                playAgain.textContent = "Play Again?";
                gameArea.appendChild(playAgain);
                playAgain.addEventListener("click", () => {
                    location.reload();
                });
            }
            else if (roundNum === 5 && humanScore === computerScore){
                gameArea.removeChild(buttons);
                finalResults.textContent = "It's a tie! Kind of like losing but just a lot less memorable for everyone involved...";
                gameArea.appendChild(finalResults);
                const playAgain = document.createElement("button")
                playAgain.textContent = "Play Again?";
                gameArea.appendChild(playAgain);
                playAgain.addEventListener("click", () => {
                    location.reload();
                });
            }
        }   
    </script>
</body>
</html>